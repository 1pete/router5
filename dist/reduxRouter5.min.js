!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.reduxRouter5=t.reduxRouter5||{})}(this,function(t){"use strict";function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:R,payload:{name:t,params:e,opts:n}}}function n(){return{type:T}}function r(){return{type:b}}function o(t,e){return{type:E,payload:{route:t,previousRoute:e}}}function u(t,e){return{type:S,payload:{route:t,previousRoute:e}}}function a(t,e,n){return{type:A,payload:{route:t,previousRoute:e,transitionError:n}}}function i(t,e){return{type:g,payload:{name:t,canActivate:e}}}function c(t,e){return{type:N,payload:{name:t,canDeactivate:e}}}function s(t){function e(){return{onTransitionStart:function(e,n){t(o(e,n))},onTransitionSuccess:function(e,n){t(u(e,n))},onTransitionError:function(e,n,r){t(a(e,n,r))}}}return e.pluginName="REDUX_PLUGIN",e}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments[1];switch(e.type){case E:return _({},t,{transitionRoute:e.payload.route,transitionError:null});case S:return _({},t,{transitionRoute:null,transitionError:null,previousRoute:e.payload.previousRoute,route:e.payload.route});case A:return _({},t,{transitionRoute:e.payload.route,transitionError:e.payload.transitionError});case b:return _({},t,{transitionRoute:null,transitionError:null});default:return t}}function p(t){return t.split(".").reduce(function(t,e){return t.concat(t.length?t[t.length-1]+"."+e:e)},[])}function f(t){return void 0!==t&&null!==t}function d(t){return t&&t.meta&&t.meta.params}function y(t,e){return f(e.meta.params[t])?Object.keys(e.meta.params[t]).reduce(function(t,n){return t[n]=e.params[n],t},{}):{}}function v(t,e){var n=e?p(e.name):[],r=p(t.name),o=Math.min(n.length,r.length),u=void 0;e?d(e)||d(t)?u=function(){var u=void 0;for(u=0;u<o;u+=1){var a=function(){var o=n[u],a=r[u];if(o!==a)return{v:u};var i=y(o,t),c=y(a,e);return i.length!==c.length?{v:u}:0===i.length?"continue":Object.keys(i).some(function(t){return c[t]!==i[t]})?{v:u}:void 0}();switch(a){case"continue":continue;default:if("object"===(void 0===a?"undefined":j(a)))return a.v}}return u}():(console.warn("[router5-transition-path] Some states are missing metadata, reloading all segments"),u=0):u=0;var a=n.slice(u).reverse(),i=r.slice(u);return{intersection:e&&u>0?n[u-1]:"",toDeactivate:a,toActivate:i}}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"router",n=function(t){return t[e]||t.get&&t.get(e)},r=void 0;return function(e){var o=n(e),u=o.route,a=o.previousRoute,i=u?v(u,a).intersection:"";return r?(!a||a!==u&&i===t)&&(r={route:u,previousRoute:a}):r={route:u,previousRoute:a},r}}var R="@@router5/NAVIGATE",T="@@router5/CANCEL",A="@@router5/TRANSITION_ERROR",S="@@router5/TRANSITION_SUCCESS",E="@@router5/TRANSITION_START",b="@@router5/CLEAR_ERRORS",N="@@router5/CAN_DEACTIVATE",g="@@router5/CAN_ACTIVATE",I=Object.freeze({NAVIGATE_TO:R,CANCEL_TRANSITION:T,TRANSITION_ERROR:A,TRANSITION_SUCCESS:S,TRANSITION_START:E,CLEAR_ERRORS:b,CAN_DEACTIVATE:N,CAN_ACTIVATE:g}),h=Object.freeze({navigateTo:e,cancelTransition:n,clearErrors:r,transitionStart:o,transitionSuccess:u,transitionError:a,canActivate:i,canDeactivate:c}),O=function(t){return function(e){var n=e.dispatch;return t.setDependency("store",e),t.usePlugin(s(n)),function(e){return function(n){switch(n.type){case R:t.navigate(n.payload.name,n.payload.params,n.payload.opts);break;case T:t.cancel();break;case N:t.canDeactivate(n.payload.name,n.payload.canDeactivate);break;case g:t.canActivate(n.payload.name,n.payload.canDeactivate);break;default:return e(n)}}}}},C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D={route:null,previousRoute:null,transitionRoute:null,transitionError:null},j="function"==typeof Symbol&&"symbol"===C(Symbol.iterator)?function(t){return void 0===t?"undefined":C(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":C(t)};t.router5Middleware=O,t.router5Reducer=l,t.actions=h,t.actionTypes=I,t.routeNodeSelector=m,t.reduxPlugin=s,Object.defineProperty(t,"__esModule",{value:!0})});
