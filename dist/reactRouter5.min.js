!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.reactRouter5={},e.React)}(this,function(e,t){"use strict";var r="default"in t?t.default:t;function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e};var i=o,u=function(e){};"production"!==process.env.NODE_ENV&&(u=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")});var a=function(e,t,r,n,o,i,a,s){if(u(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,o,i,a,s],p=0;(c=new Error(t.replace(/%s/g,function(){return l[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},s=i;"production"!==process.env.NODE_ENV&&(s=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];(function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0,i="Warning: "+e.replace(/%s/g,function(){return r[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}}).apply(void 0,[t].concat(n))}});var c=s,l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};if("production"!==process.env.NODE_ENV)var m=a,b=c,g=l,R={};var O,k=function(e,t,r,n,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(e.hasOwnProperty(i)){var u;try{m("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",n||"React class",r,i),u=e[i](t,i,n,r,null,g)}catch(e){u=e}if(b(!u||u instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",r,i,void 0===u?"undefined":p(u)),u instanceof Error&&!(u.message in R)){R[u.message]=!0;var a=o?o():"";b(!1,"Failed %s type: %s%s",r,u.message,null!=a?a:"")}}},N=function(e,t){var r="function"==typeof Symbol&&Symbol.iterator,n="@@iterator";var o="<<anonymous>>",u={array:v("array"),bool:v("boolean"),func:v("function"),number:v("number"),object:v("object"),string:v("string"),symbol:v("symbol"),any:d(i.thatReturnsNull),arrayOf:function(e){return d(function(t,r,n,o,i){if("function"!=typeof e)return new f("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var u=t[r];if(!Array.isArray(u)){var a=h(u);return new f("Invalid "+o+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected an array.")}for(var s=0;s<u.length;s++){var c=e(u,s,n,o,i+"["+s+"]",l);if(c instanceof Error)return c}return null})},element:function(){return d(function(t,r,n,o,i){var u=t[r];if(!e(u)){var a=h(u);return new f("Invalid "+o+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null})}(),instanceOf:function(e){return d(function(t,r,n,i,u){if(!(t[r]instanceof e)){var a=e.name||o,s=function(e){if(!e.constructor||!e.constructor.name)return o;return e.constructor.name}(t[r]);return new f("Invalid "+i+" `"+u+"` of type `"+s+"` supplied to `"+n+"`, expected instance of `"+a+"`.")}return null})},node:function(){return d(function(e,t,r,n,o){if(!y(e[t]))return new f("Invalid "+n+" `"+o+"` supplied to `"+r+"`, expected a ReactNode.");return null})}(),objectOf:function(e){return d(function(t,r,n,o,i){if("function"!=typeof e)return new f("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var u=t[r],a=h(u);if("object"!==a)return new f("Invalid "+o+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected an object.");for(var s in u)if(u.hasOwnProperty(s)){var c=e(u,s,n,o,i+"."+s,l);if(c instanceof Error)return c}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&c(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull;return d(function(t,r,n,o,i){for(var u=t[r],a=0;a<e.length;a++)if(s(u,e[a]))return null;var c=JSON.stringify(e);return new f("Invalid "+o+" `"+i+"` of value `"+u+"` supplied to `"+n+"`, expected one of "+c+".")})},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&c(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var t=0;t<e.length;t++){var r=e[t];if("function"!=typeof r)return c(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",b(r),t),i.thatReturnsNull}return d(function(t,r,n,o,i){for(var u=0;u<e.length;u++){var a=e[u];if(null==a(t,r,n,o,i,l))return null}return new f("Invalid "+o+" `"+i+"` supplied to `"+n+"`.")})},shape:function(e){return d(function(t,r,n,o,i){var u=t[r],a=h(u);if("object"!==a)return new f("Invalid "+o+" `"+i+"` of type `"+a+"` supplied to `"+n+"`, expected `object`.");for(var s in e){var c=e[s];if(c){var p=c(u,s,n,o,i+"."+s,l);if(p)return p}}return null})}};function s(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){this.message=e,this.stack=""}function d(e){if("production"!==process.env.NODE_ENV)var r={},n=0;function i(i,u,s,p,d,v,y){if(p=p||o,v=v||s,y!==l)if(t)a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var h=p+":"+s;!r[h]&&n<3&&(c(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",v,p),r[h]=!0,n++)}return null==u[s]?i?null===u[s]?new f("The "+d+" `"+v+"` is marked as required in `"+p+"`, but its value is `null`."):new f("The "+d+" `"+v+"` is marked as required in `"+p+"`, but its value is `undefined`."):null:e(u,s,p,d,v)}var u=i.bind(null,!1);return u.isRequired=i.bind(null,!0),u}function v(e){return d(function(t,r,n,o,i,u){var a=t[r];return h(a)!==e?new f("Invalid "+o+" `"+i+"` of type `"+m(a)+"` supplied to `"+n+"`, expected `"+e+"`."):null})}function y(t){switch(void 0===t?"undefined":p(t)){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var o=function(e){var t=e&&(r&&e[r]||e[n]);if("function"==typeof t)return t}(t);if(!o)return!1;var i,u=o.call(t);if(o!==t.entries){for(;!(i=u.next()).done;)if(!y(i.value))return!1}else for(;!(i=u.next()).done;){var a=i.value;if(a&&!y(a[1]))return!1}return!0;default:return!1}}function h(e){var t=void 0===e?"undefined":p(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function m(e){if(void 0===e||null===e)return""+e;var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function b(e){var t=m(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return f.prototype=Error.prototype,u.checkPropTypes=k,u.PropTypes=u,u},P=(function(e){if("production"!==process.env.NODE_ENV){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=N(function(e){return"object"===(void 0===e?"undefined":p(e))&&null!==e&&e.$$typeof===t},!0)}else e.exports=function(){function e(e,t,r,n,o,i){i!==l&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return r.checkPropTypes=i,r.PropTypes=r,r}()}(O={exports:{}},O.exports),O.exports),E=function(e){function t(e,r){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.router=r.router,n.router.hasPlugin("BROWSER_PLUGIN")||console.error("[react-router5][BaseLink] missing browser plugin, href might be build incorrectly"),n.isActive=n.isActive.bind(n),n.clickHandler=n.clickHandler.bind(n),n.callback=n.callback.bind(n),n.state={active:n.isActive()},n}return y(t,e),d(t,[{key:"buildUrl",value:function(e,t){return this.router.buildUrl?this.router.buildUrl(e,t):this.router.buildPath(e,t)}},{key:"isActive",value:function(){return this.router.isActive(this.props.routeName,this.props.routeParams,this.props.activeStrict)}},{key:"callback",value:function(e,t){!e&&this.props.successCallback&&this.props.successCallback(t),e&&this.props.errorCallback&&this.props.errorCallback(e)}},{key:"clickHandler",value:function(e){if(!this.props.onClick||(this.props.onClick(e),!e.defaultPrevented)){var t=e.metaKey||e.altKey||e.ctrlKey||e.shiftKey;0!==e.button||t||(e.preventDefault(),this.router.navigate(this.props.routeName,this.props.routeParams,this.props.routeOptions,this.callback))}}},{key:"render",value:function(){var e=this.props,t=e.routeName,n=e.routeParams,o=(e.routeOptions,e.className),i=e.activeClassName,u=(e.activeStrict,e.route,e.previousRoute,e.router,e.children),a=(e.onClick,e.successCallback,e.errorCallback,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["routeName","routeParams","routeOptions","className","activeClassName","activeStrict","route","previousRoute","router","children","onClick","successCallback","errorCallback"])),s=this.isActive(),c=this.buildUrl(t,n),l=(o?o.split(" "):[]).concat(s?[i]:[]).join(" ");return r.createElement("a",v({},a,{href:c,className:l,onClick:this.clickHandler}),u)}}]),t}(t.Component);E.contextTypes={router:P.object.isRequired},E.propTypes={routeName:P.string.isRequired,routeParams:P.object,routeOptions:P.object,activeClassName:P.string,activeStrict:P.bool,onClick:P.func,onMouseOver:P.func,successCallback:P.func,errorCallback:P.func},E.defaultProps={activeClassName:"active",activeStrict:!1,routeParams:{},routeOptions:{}};var _=function(e){return e.displayName||e.name||"Component"},w=function(e,t){if(!e)throw new Error(t)};var j=function(e){function r(e,t){f(this,r);var n=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.router=e.router,n}return y(r,e),d(r,[{key:"getChildContext",value:function(){return{router:this.router}}},{key:"componentWillReceiveProps",value:function(e){this.props.router!==e.router&&console.error("[react-router5][RouterProvider] does not support changing the router object.")}},{key:"render",value:function(){var e=this.props.children;return t.Children.only(e)}}]),r}(t.Component);function C(e){var r=function(r){function n(e,t){f(this,n);var r=h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.router=t.router,r.state={previousRoute:null,route:r.router.getState()},r.listener=r.listener.bind(r),r}return y(n,r),d(n,[{key:"componentDidMount",value:function(){var e=this;w(this.router.hasPlugin("LISTENERS_PLUGIN"),"[react-router5][withRoute] missing listeners plugin"),this.listener=function(t,r){return e.setState({previousRoute:r,route:t})},this.router.addListener(this.listener)}},{key:"componentWillUnmount",value:function(){this.router.removeListener(this.listener)}},{key:"listener",value:function(e,t){this.setState({previousRoute:t,route:e})}},{key:"render",value:function(){return w(!this.props.router&&!this.props.route&&!this.props.previousRoute,"[react-router5] prop names `router`, `route` and `previousRoute` are reserved."),t.createElement(e,v({},this.props,this.state,{router:this.router}))}}]),n}(t.Component);return r.contextTypes={router:P.object.isRequired},r.displayName="WithRoute["+_(e)+"]",r}j.propTypes={router:P.object.isRequired,children:P.element.isRequired},j.childContextTypes={router:P.object.isRequired};var S="function"==typeof Symbol&&"symbol"===p(Symbol.iterator)?function(e){return void 0===e?"undefined":p(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":p(e)};function T(e){return e.split(".").reduce(function(e,t){return e.concat(e.length?e[e.length-1]+"."+t:t)},[])}function x(e){return e&&e.meta&&e.meta.params}function I(e,t){return void 0===(r=t.meta.params[e])||null===r?{}:Object.keys(t.meta.params[e]).reduce(function(e,r){return e[r]=t.params[r],e},{});var r}var L=(r.createContext||function(){return{Provider:function(e){return e.children},Consumer:function(){return null}}})({}),A=L.Provider,q=L.Consumer,D=function(e){function t(e){f(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=e.router;return r.router=n,r.state={route:n.getState(),previousRoute:null,router:n},r.listener=r.listener.bind(r),r}return y(t,e),d(t,[{key:"listener",value:function(e,t){this.setState({route:e,previousRoute:t})}},{key:"componentDidMount",value:function(){w(this.router.hasPlugin("LISTENERS_PLUGIN"),"[react-router5][RouteProvider] missing listeners plugin"),this.router.addListener(this.listener)}},{key:"componentWillUnmount",value:function(){this.router.removeListener(this.listener)}},{key:"getChildContext",value:function(){return{router:this.props.router}}},{key:"render",value:function(){return r.createElement(A,{value:this.state},this.props.children)}}]),t}(r.PureComponent);D.childContextTypes={router:P.object.isRequired},D.propTypes={router:P.object.isRequired,children:P.node.isRequired};var U=function(e){function t(e,r){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.renderOnRouteNodeChange=n.renderOnRouteNodeChange.bind(n),n}return y(t,e),d(t,[{key:"renderOnRouteNodeChange",value:function(e){var t=function(e,t){var r=t?T(t.name):[],n=T(e.name),o=Math.min(r.length,n.length),i=void 0;i=t&&(x(t)||x(e))?function(){var i=void 0,u=function(){var o=r[i],u=n[i];if(o!==u)return{v:i};var a=I(o,e),s=I(u,t);return a.length!==s.length?{v:i}:0===a.length?"continue":Object.keys(a).some(function(e){return s[e]!==a[e]})?{v:i}:void 0};for(i=0;i<o;i+=1){var a=u();switch(a){case"continue":continue;default:if("object"===(void 0===a?"undefined":S(a)))return a.v}}return i}():0;var u=r.slice(i).reverse(),a=n.slice(i);return{intersection:t&&i>0?r[i-1]:"",toDeactivate:u,toActivate:a}}(e.route,e.previousRoute).intersection;return this.memoizedResult&&t!==this.props.nodeName||(this.memoizedResult=this.props.children(e)),this.memoizedResult}},{key:"render",value:function(){return r.createElement(q,null,this.renderOnRouteNodeChange)}}]),t}(r.Component);U.propTypes={nodeName:P.string.isRequired,children:P.func.isRequired};var V=C(E);e.BaseLink=E,e.routeNode=function(e){return function(r){var n=function(n){function o(e,t){f(this,o);var r=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return r.router=t.router,r.state={previousRoute:null,route:r.router.getState()},r.nodeListener=r.nodeListener.bind(r),r}return y(o,n),d(o,[{key:"nodeListener",value:function(e,t){this.setState({previousRoute:t,route:e})}},{key:"componentDidMount",value:function(){w(this.router.hasPlugin("LISTENERS_PLUGIN"),"[react-router5][routeNode] missing listeners plugin"),this.router.addNodeListener(e,this.nodeListener)}},{key:"componentWillUnmount",value:function(){this.router.removeNodeListener(e,this.nodeListener)}},{key:"render",value:function(){var e=this.props,n=this.router,o=this.state,i=o.previousRoute,u=o.route;return t.createElement(r,v({},e,{router:n,previousRoute:i,route:u}))}}]),o}(t.Component);return n.contextTypes={router:P.object.isRequired},n.displayName="RouteNode["+_(r)+"]",n}},e.RouterProvider=j,e.withRoute=C,e.Link=V,e.RouteProvider=D,e.Route=q,e.RouteNode=U,Object.defineProperty(e,"__esModule",{value:!0})});
