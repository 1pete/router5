!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.reactRouter5=e.reactRouter5||{},e.React)}(this,function(e,t){"use strict";function r(e){return function(){return e}}function n(e){var r=function(r){function n(e,t){b(this,n);var r=N(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.router=t.router,r.state={previousRoute:null,route:r.router.getState()},r.listener=r.listener.bind(r),r}return O(n,r),g(n,[{key:"componentDidMount",value:function(){var e=this;A(this.router.hasPlugin("LISTENERS_PLUGIN"),"[react-router5][withRoute] missing listeners plugin"),this.listener=function(t,r){return e.setState({previousRoute:r,route:t})},this.router.addListener(this.listener)}},{key:"componentWillUnmount",value:function(){this.router.removeListener(this.listener)}},{key:"listener",value:function(e,t){this.setState({previousRoute:t,route:e})}},{key:"render",value:function(){return A(!this.props.router&&!this.props.route&&!this.props.previousRoute,"[react-router5] prop names `router`, `route` and `previousRoute` are reserved."),t.createElement(e,R({},this.props,this.state,{router:this.router}))}}]),n}(t.Component);return r.contextTypes={router:T.object.isRequired},r.displayName="WithRoute["+I(e)+"]",r}function o(e){return e.split(".").reduce(function(e,t){return e.concat(e.length?e[e.length-1]+"."+t:t)},[])}function i(e){return void 0!==e&&null!==e}function u(e){return e&&e.meta&&e.meta.params}function a(e,t){return i(t.meta.params[e])?Object.keys(t.meta.params[e]).reduce(function(e,r){return e[r]=t.params[r],e},{}):{}}function s(e,t){var r=t?o(t.name):[],n=o(e.name),i=Math.min(r.length,n.length),s=void 0;t?u(t)||u(e)?s=function(){var o=void 0;for(o=0;o<i;o+=1){var u=function(){var i=r[o],u=n[o];if(i!==u)return{v:o};var s=a(i,e),c=a(u,t);return s.length!==c.length?{v:o}:0===s.length?"continue":Object.keys(s).some(function(e){return c[e]!==s[e]})?{v:o}:void 0}();switch(u){case"continue":continue;default:if("object"===(void 0===u?"undefined":q(u)))return u.v}}return o}():(console.warn("[router5-transition-path] Some states are missing metadata, reloading all segments"),s=0):s=0;var c=r.slice(s).reverse(),l=n.slice(s);return{intersection:t&&s>0?r[s-1]:"",toDeactivate:c,toActivate:l}}var c="default"in t?t.default:t,l=function(){};l.thatReturns=r,l.thatReturnsFalse=r(!1),l.thatReturnsTrue=r(!0),l.thatReturnsNull=r(null),l.thatReturnsThis=function(){return this},l.thatReturnsArgument=function(e){return e};var p=l,f=function(e){};"production"!==process.env.NODE_ENV&&(f=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")});var d=function(e,t,r,n,o,i,u,a){if(f(t),!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,o,i,u,a],l=0;(s=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}},v=p;"production"!==process.env.NODE_ENV&&function(){var e=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0,i="Warning: "+e.replace(/%s/g,function(){return r[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}};v=function(t,r){if(void 0===r)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==r.indexOf("Failed Composite propType: ")&&!t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];e.apply(void 0,[r].concat(o))}}}();var y=v,h="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},k=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},N=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};if("production"!==process.env.NODE_ENV)var P=d,E=y,_=h,w={};var j=function(e,t,r,n,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(e.hasOwnProperty(i)){var u;try{P("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",n||"React class",r,i),u=e[i](t,i,n,r,null,_)}catch(e){u=e}if(E(!u||u instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",r,i,void 0===u?"undefined":m(u)),u instanceof Error&&!(u.message in w)){w[u.message]=!0;var a=o?o():"";E(!1,"Failed %s type: %s%s",r,u.message,null!=a?a:"")}}},C=function(e,t){function r(e){var t=e&&(b&&e[b]||e[g]);if("function"==typeof t)return t}function n(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function o(e){this.message=e,this.stack=""}function i(e){function r(r,u,a,s,c,l,p){if(s=s||R,l=l||a,p!==h)if(t)d(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var f=s+":"+a;!n[f]&&i<3&&(y(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",l,s),n[f]=!0,i++)}return null==u[a]?r?new o(null===u[a]?"The "+c+" `"+l+"` is marked as required in `"+s+"`, but its value is `null`.":"The "+c+" `"+l+"` is marked as required in `"+s+"`, but its value is `undefined`."):null:e(u,a,s,c,l)}if("production"!==process.env.NODE_ENV)var n={},i=0;var u=r.bind(null,!1);return u.isRequired=r.bind(null,!0),u}function u(e){return i(function(t,r,n,i,u,a){var s=t[r];return c(s)!==e?new o("Invalid "+i+" `"+u+"` of type `"+l(s)+"` supplied to `"+n+"`, expected `"+e+"`."):null})}function a(t){switch(void 0===t?"undefined":m(t)){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(a);if(null===t||e(t))return!0;var n=r(t);if(!n)return!1;var o,i=n.call(t);if(n!==t.entries){for(;!(o=i.next()).done;)if(!a(o.value))return!1}else for(;!(o=i.next()).done;){var u=o.value;if(u&&!a(u[1]))return!1}return!0;default:return!1}}function s(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function c(e){var t=void 0===e?"undefined":m(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":s(t,e)?"symbol":t}function l(e){if(void 0===e||null===e)return""+e;var t=c(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function f(e){var t=l(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function v(e){return e.constructor&&e.constructor.name?e.constructor.name:R}var b="function"==typeof Symbol&&Symbol.iterator,g="@@iterator",R="<<anonymous>>",O={array:u("array"),bool:u("boolean"),func:u("function"),number:u("number"),object:u("object"),string:u("string"),symbol:u("symbol"),any:i(p.thatReturnsNull),arrayOf:function(e){return i(function(t,r,n,i,u){if("function"!=typeof e)return new o("Property `"+u+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var a=t[r];if(!Array.isArray(a))return new o("Invalid "+i+" `"+u+"` of type `"+c(a)+"` supplied to `"+n+"`, expected an array.");for(var s=0;s<a.length;s++){var l=e(a,s,n,i,u+"["+s+"]",h);if(l instanceof Error)return l}return null})},element:function(){return i(function(t,r,n,i,u){var a=t[r];return e(a)?null:new o("Invalid "+i+" `"+u+"` of type `"+c(a)+"` supplied to `"+n+"`, expected a single ReactElement.")})}(),instanceOf:function(e){return i(function(t,r,n,i,u){if(!(t[r]instanceof e)){var a=e.name||R;return new o("Invalid "+i+" `"+u+"` of type `"+v(t[r])+"` supplied to `"+n+"`, expected instance of `"+a+"`.")}return null})},node:function(){return i(function(e,t,r,n,i){return a(e[t])?null:new o("Invalid "+n+" `"+i+"` supplied to `"+r+"`, expected a ReactNode.")})}(),objectOf:function(e){return i(function(t,r,n,i,u){if("function"!=typeof e)return new o("Property `"+u+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var a=t[r],s=c(a);if("object"!==s)return new o("Invalid "+i+" `"+u+"` of type `"+s+"` supplied to `"+n+"`, expected an object.");for(var l in a)if(a.hasOwnProperty(l)){var p=e(a,l,n,i,u+"."+l,h);if(p instanceof Error)return p}return null})},oneOf:function(e){return Array.isArray(e)?i(function(t,r,i,u,a){for(var s=t[r],c=0;c<e.length;c++)if(n(s,e[c]))return null;return new o("Invalid "+u+" `"+a+"` of value `"+s+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")}):("production"!==process.env.NODE_ENV&&y(!1,"Invalid argument supplied to oneOf, expected an instance of array."),p.thatReturnsNull)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&y(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),p.thatReturnsNull;for(var t=0;t<e.length;t++){var r=e[t];if("function"!=typeof r)return y(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",f(r),t),p.thatReturnsNull}return i(function(t,r,n,i,u){for(var a=0;a<e.length;a++)if(null==(0,e[a])(t,r,n,i,u,h))return null;return new o("Invalid "+i+" `"+u+"` supplied to `"+n+"`.")})},shape:function(e){return i(function(t,r,n,i,u){var a=t[r],s=c(a);if("object"!==s)return new o("Invalid "+i+" `"+u+"` of type `"+s+"` supplied to `"+n+"`, expected `object`.");for(var l in e){var p=e[l];if(p){var f=p(a,l,n,i,u+"."+l,h);if(f)return f}}return null})}};return o.prototype=Error.prototype,O.checkPropTypes=j,O.PropTypes=O,O},S=function(){function e(e,t,r,n,o,i){i!==h&&d(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return r.checkPropTypes=p,r.PropTypes=r,r},T=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){if("production"!==process.env.NODE_ENV){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=C(function(e){return"object"===(void 0===e?"undefined":m(e))&&null!==e&&e.$$typeof===t},!0)}else e.exports=S()}),x=function(e){function t(e,r){b(this,t);var n=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.router=r.router,n.router.hasPlugin("BROWSER_PLUGIN")||console.error("[react-router5][BaseLink] missing browser plugin, href might be build incorrectly"),n.isActive=n.isActive.bind(n),n.clickHandler=n.clickHandler.bind(n),n.callback=n.callback.bind(n),n.state={active:n.isActive()},n}return O(t,e),g(t,[{key:"buildUrl",value:function(e,t){return this.router.buildUrl?this.router.buildUrl(e,t):this.router.buildPath(e,t)}},{key:"isActive",value:function(){return this.router.isActive(this.props.routeName,this.props.routeParams,this.props.activeStrict)}},{key:"callback",value:function(e,t){!e&&this.props.successCallback&&this.props.successCallback(t),e&&this.props.errorCallback&&this.props.errorCallback(e)}},{key:"clickHandler",value:function(e){if(!this.props.onClick||(this.props.onClick(e),!e.defaultPrevented)){var t=e.metaKey||e.altKey||e.ctrlKey||e.shiftKey;0!==e.button||t||(e.preventDefault(),this.router.navigate(this.props.routeName,this.props.routeParams,this.props.routeOptions,this.callback))}}},{key:"render",value:function(){var e=this.props,t=e.routeName,r=e.routeParams,n=(e.routeOptions,e.className),o=e.activeClassName,i=(e.activeStrict,e.route,e.previousRoute,e.router,e.children),u=(e.onClick,e.successCallback,e.errorCallback,k(e,["routeName","routeParams","routeOptions","className","activeClassName","activeStrict","route","previousRoute","router","children","onClick","successCallback","errorCallback"])),a=this.isActive(),s=this.buildUrl(t,r),l=(n?n.split(" "):[]).concat(a?[o]:[]).join(" ");return c.createElement("a",R({},u,{href:s,className:l,onClick:this.clickHandler}),i)}}]),t}(t.Component);x.contextTypes={router:T.object.isRequired},x.propTypes={routeName:T.string.isRequired,routeParams:T.object,routeOptions:T.object,activeClassName:T.string,activeStrict:T.bool,onClick:T.func,onMouseOver:T.func,successCallback:T.func,errorCallback:T.func},x.defaultProps={activeClassName:"active",activeStrict:!1,routeParams:{},routeOptions:{}};var I=function(e){return e.displayName||e.name||"Component"},A=function(e,t){if(!e)throw new Error(t)},L=function(e){function r(e,t){b(this,r);var n=N(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.router=e.router,n}return O(r,e),g(r,[{key:"getChildContext",value:function(){return{router:this.router}}},{key:"componentWillReceiveProps",value:function(e){this.props.router!==e.router&&console.error("[react-router5][RouterProvider] does not support changing the router object.")}},{key:"render",value:function(){var e=this.props.children;return t.Children.only(e)}}]),r}(t.Component);L.propTypes={router:T.object.isRequired,children:T.element.isRequired},L.childContextTypes={router:T.object.isRequired};var q="function"==typeof Symbol&&"symbol"===m(Symbol.iterator)?function(e){return void 0===e?"undefined":m(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":m(e)},D=(c.createContext||function(){return{Provider:function(e){return e.children},Consumer:function(){return null}}})({}),U=D.Provider,V=D.Consumer,W=function(e){function t(e){b(this,t);var r=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=e.router;return r.router=n,r.state={route:n.getState(),previousRoute:null,router:n},r.listener=r.listener.bind(r),r}return O(t,e),g(t,[{key:"listener",value:function(e,t){this.setState({route:e,previousRoute:t})}},{key:"componentDidMount",value:function(){A(this.router.hasPlugin("LISTENERS_PLUGIN"),"[react-router5][RouteProvider] missing listeners plugin"),this.router.addListener(this.listener)}},{key:"componentWillUnmount",value:function(){this.router.removeListener(this.listener)}},{key:"getChildContext",value:function(){return{router:this.props.router}}},{key:"render",value:function(){return c.createElement(U,{value:this.state},this.props.children)}}]),t}(c.PureComponent);W.childContextTypes={router:T.object.isRequired},W.propTypes={router:T.object.isRequired,children:T.node.isRequired};var M=function(e){function t(e,r){b(this,t);var n=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.renderOnRouteNodeChange=n.renderOnRouteNodeChange.bind(n),n}return O(t,e),g(t,[{key:"renderOnRouteNodeChange",value:function(e){var t=s(e.route,e.previousRoute).intersection;return this.memoizedResult&&t!==this.props.nodeName||(this.memoizedResult=this.props.children(e)),this.memoizedResult}},{key:"render",value:function(){return c.createElement(V,null,this.renderOnRouteNodeChange)}}]),t}(c.Component);M.propTypes={nodeName:T.string.isRequired,children:T.func.isRequired};var H=n(x);e.BaseLink=x,e.routeNode=function(e){return function(r){var n=function(n){function o(e,t){b(this,o);var r=N(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return r.router=t.router,r.state={previousRoute:null,route:r.router.getState()},r}return O(o,n),g(o,[{key:"componentDidMount",value:function(){var t=this;A(this.router.hasPlugin("LISTENERS_PLUGIN"),"[react-router5][routeNode] missing listeners plugin"),this.nodeListener=function(e,r){return t.setState({previousRoute:r,route:e})},this.router.addNodeListener(e,this.nodeListener)}},{key:"componentWillUnmount",value:function(){this.router.removeNodeListener(e,this.nodeListener)}},{key:"render",value:function(){var e=this.props,n=this.router,o=this.state,i=o.previousRoute,u=o.route;return t.createElement(r,R({},e,{router:n,previousRoute:i,route:u}))}}]),o}(t.Component);return n.contextTypes={router:T.object.isRequired},n.displayName="RouteNode["+I(r)+"]",n}},e.RouterProvider=L,e.withRoute=n,e.Link=H,e.RouteProvider=W,e.Route=V,e.RouteNode=M,Object.defineProperty(e,"__esModule",{value:!0})});
